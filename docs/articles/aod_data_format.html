<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AOD Data Format • MazamaSatelliteUtils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AOD Data Format">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MazamaSatelliteUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.13</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aod_data_format.html">AOD Data Format</a>
    </li>
    <li>
      <a href="../articles/goes-east_data_quality_limits.html">GOES-East Data Quality Spatial Limits</a>
    </li>
    <li>
      <a href="../articles/grid_sizes.html">Grid Sizes</a>
    </li>
    <li>
      <a href="../articles/intro_to_goes_aodc_data.html">Intro to GOES AOD Data</a>
    </li>
    <li>
      <a href="../articles/intro_to_mazama_satellite_utils.html">Introduction to MazamaSatelliteUtils</a>
    </li>
    <li>
      <a href="../articles/working_with_goes_aodc_rasters.html">Working With GOES AODC Rasters</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>AOD Data Format</h1>
                        <h4 class="author">Mazama Science</h4>
            
            <h4 class="date">12/19/2019</h4>
      
      
      <div class="hidden name"><code>aod_data_format.Rmd</code></div>

    </div>

    
    
<div id="netcdf" class="section level2">
<h2 class="hasAnchor">
<a href="#netcdf" class="anchor"></a>NetCDF</h2>
<blockquote>
<p>The Aerosol Optical Depth product is delivered using netCDF version 4 product files. NetCDF includes constructs to define scalar and multi-dimensional data, along with the associated metadata. This standard includes requirements that allow the data to be located in space and time, as well as the semantics of the data captured in the product file.</p>
</blockquote>
<p>* From the <a href="https://www.goes-r.gov/products/docs/PUG-L2+-vol5.pdf">GOES R-Series Product User Guide</a>.</p>
<p>NetCDF (network common data form) files are self-describing, machine-independent data formats that support the creation, access, and sharing of array-oriented scientific data. They are used for storing multidimensional scientific data (variables) such as temperature, humidity, pressure, wind speed, and direction. Each of these variables can be displayed through a dimension (such as time or geographic location). NetCDF was developed and is maintained at Unidata, which is part of the University Corporation for Atmospheric Research (UCAR) Community Programs (UCP) and is a standard in the scientific community for sharing data.</p>
<p>Generally speaking, a netCDF file can be viewed as a multidimensional grid, or raster, file. They are often used to store <em>n(x, y, z)</em> data where the scientific data <em>(n)</em> are linked to one-dimensional spatial <em>(x, y)</em> and time <em>(z)</em> coordinates. These dimensional coordinates are strictly monotonic (values increasing or decreasing) and are full, meaning that there are no missing or NA values. The scientific data itself may have missing values which are usually identified with a specific value that falls outside of the data’s valid instrument range such as -1 or 999.</p>
<center>
<img src="img/3D_netcdf.gif" alt="3D_netcdf">
</center>
</div>
<div id="aod-data-dictionary" class="section level2">
<h2 class="hasAnchor">
<a href="#aod-data-dictionary" class="anchor"></a>AOD Data Dictionary</h2>
<p>AOD NetCDF files follow the conventions set forth in <a href="https://ferret.pmel.noaa.gov/Ferret/documentation/coards-netcdf-conventions">COARDS</a>. It is recommended that the MazamaSatelliteUtils user take a moment to acquaint themselves with these conventions. An overview of key aspects of the GOES AOD NetCDF file will be provided below, but will not cover all aspects related to it.</p>
<div id="pertinent-metadata-from-a-goes-17-aod-netcdf-file-" class="section level4">
<h4 class="hasAnchor">
<a href="#pertinent-metadata-from-a-goes-17-aod-netcdf-file-" class="anchor"></a>Pertinent metadata from a GOES-17 AOD NetCDF file.</h4>
<pre><code>netcdf OR_ABI-L2-AODC-M6_G17_s20193001616196_e20193001618569_c20193001621030 {
dimensions:
        y = 1500 ;
        x = 2500 ;
variables:
     short AOD(y, x) ;
                AOD:_FillValue = -1s ;
                AOD:long_name = "ABI L2+ Aerosol Optical Depth at 550 nm" ;
                AOD:standard_name = "atmosphere_extinction_optical_thickness_due_to_ambient_aerosol" ;
                AOD:_Unsigned = "true" ;
                AOD:valid_range = 0s, -6s ;
                AOD:scale_factor = 7.706e-05f ;
                AOD:add_offset = -0.05f ;
                AOD:units = "1" ;
                AOD:resolution = "y: 0.000056 rad x: 0.000056 rad" ;
                AOD:grid_mapping = "goes_imager_projection" ;
                AOD:ancillary_variables = "DQF" ;
      byte DQF(y, x) ;
                DQF:_FillValue = -1b ;
                DQF:long_name = "ABI L2+ Aerosol Optical Depth at 550 nm data quality flags" ;
                DQF:standard_name = "status_flag" ;
                DQF:_Unsigned = "true" ;
                DQF:valid_range = 0b, 3b ;
                DQF:units = "1"  ;
                DQF:grid_mapping = "goes_imager_projection" ;
                DQF:flag_values = 0b, 1b, 2b, 3b ;
                DQF:flag_meanings = "high_quality_retrieval_qf
                                     medium_quality_retrieval_qf
                                     low_quality_retrieval_qf
                                     no_retrieval_qf" ;
                DQF:number_of_qf_values = 4b ;
       short y(y) ;
                y:scale_factor = -5.6e-05f ;
                y:add_offset = 0.128212f ;
                y:units = "rad" ;
                y:axis = "Y" ;
                y:long_name = "GOES fixed grid projection y-coordinate" ;
                y:standard_name = "projection_y_coordinate" ;
       short x(x) ;
                x:scale_factor = 5.6e-05f ;
                x:add_offset = -0.069972f ;
                x:units = "rad" ;
                x:axis = "X" ;
                x:long_name = "GOES fixed grid projection x-coordinate" ;
                x:standard_name = "projection_x_coordinate" ;
       int goes_imager_projection ;
                goes_imager_projection:long_name = "GOES-R ABI fixed grid projection" ;
                goes_imager_projection:grid_mapping_name = "geostationary" ;
                goes_imager_projection:perspective_point_height = 35786023. ;
                goes_imager_projection:semi_major_axis = 6378137. ;
                goes_imager_projection:semi_minor_axis = 6356752.31414 ;
                goes_imager_projection:inverse_flattening = 298.2572221 ;
                goes_imager_projection:latitude_of_projection_origin = 0. ;
                goes_imager_projection:longitude_of_projection_origin = -137. ;
                goes_imager_projection:sweep_angle_axis = "x" ;</code></pre>
</div>
<div id="dimensions" class="section level4">
<h4 class="hasAnchor">
<a href="#dimensions" class="anchor"></a>Dimensions</h4>
<p>The Metadata above shows dimensions comprised of <em>x</em> and <em>y</em> variables with a length of 2500 for <em>x</em> and 1500 for <em>y</em>.</p>
<pre><code>dimensions:
        y = 1500 ;
        x = 2500 ;</code></pre>
<p>This corresponds to a rectangular grid that is 2500 cells (or pixels) wide and 1500 pixels tall.</p>
</div>
<div id="description-of-aod-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#description-of-aod-variable" class="anchor"></a>Description of AOD Variable</h3>
<div id="variable-type-and-dimensions" class="section level4">
<h4 class="hasAnchor">
<a href="#variable-type-and-dimensions" class="anchor"></a>Variable type and dimensions</h4>
<pre><code>short AOD(y, x) ;</code></pre>
<p>The data type of the AOD variable is defined as <em>short</em>, meaning short (or 16-bit) integer. The AOD variable is associated with <em>x</em> and <em>y</em> dimension variables, meaning that there will be an <em>(x, y)</em> value associated with each AOD value.</p>
</div>
<div id="numeric-range-and-fillvalue" class="section level4">
<h4 class="hasAnchor">
<a href="#numeric-range-and-fillvalue" class="anchor"></a>Numeric range and FillValue</h4>
<pre><code>AOD:_FillValue = -1s ;
AOD:_Unsigned = "true" ;
AOD:valid_range = 0s, -6s ;</code></pre>
<p>As read from the NetCDF file, the raw AOD values contain <em>-1</em> as a <em>FillValue</em> to indicate <em>No Data</em>. Additionally the data values are <em>Unsigned</em> (more on this below), and the <em>valid_range</em> of the data is from 0 to -6 <em>short integers</em>. This may be confusing to the user, so additional explanation is provided below.</p>
</div>
<div id="explanation-of-signed-vs-unsigned-integer-storage-in-netcdf" class="section level4">
<h4 class="hasAnchor">
<a href="#explanation-of-signed-vs-unsigned-integer-storage-in-netcdf" class="anchor"></a>Explanation of Signed vs. Unsigned Integer Storage in NetCDF</h4>
<p>By definition, a numeric variable is <em>signed</em> if it can represent both positive and negative numbers, and <em>unsigned</em> if it can only represent non-negative numbers (zero or positive numbers). Aside from having the ability to store negative values, a <em>signed</em> data set differs from an <em>unsigned</em> one in that it can only store a positive number that is half as large as one in an <em>unsigned</em> set. This is because the integer type defines the maximum storage space that can be allocated for each integer. So in the case of an <em>unsigned short</em> integer, the number of values that could be stored is 65,536 or 2^16, with a range of [0, 65535] (Remember that 0 counts as a value and takes up one position). If the data type were <em>signed short</em>, then the number of values is still limited to 65,536 but the valid range would be [-32768, 32767].</p>
</div>
<div id="netcdf-implementation-of-unsigned-integers" class="section level4">
<h4 class="hasAnchor">
<a href="#netcdf-implementation-of-unsigned-integers" class="anchor"></a>NetCDF implementation of unsigned integers</h4>
<p>In the case of AOD data, the <em>Unsigned = “true”;</em> metadata tag tells us that we should only have positive numbers in the data. However, while the netCDF version 4 format supports the use of unsigned integers as externally defined data types, internally the data is still stored as signed integers. In a data like this, when negative values are present in what should be an <em>unsigned</em> data type, it is an indication that the original value inserted into the file exceeded the maximum positive value allowed for in the <em>signed</em> internal representation. Instead, the NetCDF libraries store the offset amount needed to convert the value back into the correct, original <em>unsigned</em> value. This offset is by definition negative and is thus easily stored as a <em>signed</em> integer.</p>
</div>
<div id="conversion-from-signed-to-unsigned-integer" class="section level4">
<h4 class="hasAnchor">
<a href="#conversion-from-signed-to-unsigned-integer" class="anchor"></a>Conversion from signed to unsigned integer</h4>
<pre><code>AOD:valid_range = 0s, -6s
    translates to
valid range = [0, 65536 -6]
    or
AOD:valid_range = 0, 65530</code></pre>
<p>* Additional information on NetCDF data types can be found at <a href="https://www.unidata.ucar.edu/software/netcdf/docs/data_type.html" class="uri">https://www.unidata.ucar.edu/software/netcdf/docs/data_type.html</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#netcdf">NetCDF</a></li>
      <li><a href="#aod-data-dictionary">AOD Data Dictionary</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Helen Miller, Raffuse Sean, Rex Thompson, Tate Brasel, Thomas Bergamaschi, Roger Andre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
