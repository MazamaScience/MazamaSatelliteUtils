---
title: "GOES Coverage"
author: "Mazama Science"
date: "5/13/2021"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{GOES Coverage}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
library(MazamaSatelliteUtils)
library(MazamaSpatialUtils)

setSatelliteDataDir("~/Data/Satellite")
setSpatialDataDir("~/Data/Spatial")

loadSpatialData("NaturalEarthAdm1")

knitr::opts_chunk$set(echo = TRUE)
cellSize <- 0.25
```

The GOES-16 and GOES-17 satellites respectively cover the east and west regions 
of the continental US with their ABI scanners, but what exactly do their 
coverage areas look like? Do they leave any regions out? This article will try 
to answer these questions by plotting scans from each satellite at different 
times and data quality levels.

## GOES-16 Coverage

The GOES-16 satellite operates in the GOES East position at 75.2Â°W. Let's plot
one of its recent scans from 2021 with DQF levels of 3, 2, 1, 0 
(highest to lowest).

```{r goes16_2021_coverage}
goesaodc_downloadScanFiles(
  satID = "G16",
  datetime = "2021-05-12 09:00",
  timezone = "America/Chicago",
  verbose = TRUE
)

scanFileG17 <- goesaodc_listScanFiles(
  satID = "G16",
  datetime = "2021-05-12 09:00",
  timezone = "America/Chicago"
)

# Create G16 scan rasters

scanRasterG162021dqf3 <- goesaodc_createScanRaster(
  filename = scanFileG16,
  cellSize = cellSize,
  dqfLevel = 3
)

scanRasterG162021dqf2 <- goesaodc_createScanRaster(
  filename = scanFileG16,
  cellSize = cellSize,
  dqfLevel = 2
)

scanRasterG162021dqf1 <- goesaodc_createScanRaster(
  filename = scanFileG16,
  cellSize = cellSize,
  dqfLevel = 1
)

scanRasterG162021dqf0 <- goesaodc_createScanRaster(
  filename = scanFileG16,
  cellSize = cellSize,
  dqfLevel = 0
)

# Plot G16 scan rasters

goesaodc_plotScanRaster(
  raster = scanRasterG162021dqf3,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-16 DQF3 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG162021dqf2,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-16 DQF2 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG162021dqf1,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-16 DQF1 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG162021dqf0,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-16 DQF0 Coverage"
)
```

```{r goes16_2019_coverage}

```

```{r}
goesaodc_downloadScanFiles(
  satID = "G17",
  datetime = "2021-05-12 08:00",
  timezone = "America/Chicago",
  verbose = TRUE
)

# ----- Get one scan file each for G16 and G17

scanFileG17 <- goesaodc_listScanFiles(
  satID = "G17",
  datetime = "2019-10-27 10:00",
  timezone = "America/Los_Angeles"
)

# ----- Create G17 scan rasters ------------------------------------------------

scanRasterG17dqf3 <- goesaodc_createScanRaster(
  filename = scanFileG17,
  cellSize = cellSize,
  dqfLevel = 3
)

scanRasterG17dqf2 <- goesaodc_createScanRaster(
  filename = scanFileG17,
  cellSize = cellSize,
  dqfLevel = 2
)

scanRasterG17dqf1 <- goesaodc_createScanRaster(
  filename = scanFileG17,
  cellSize = cellSize,
  dqfLevel = 1
)

scanRasterG17dqf0 <- goesaodc_createScanRaster(
  filename = scanFileG17,
  cellSize = cellSize,
  dqfLevel = 0
)

# ----- Plot G17 scan rasters

goesaodc_plotScanRaster(
  raster = scanRasterG17dqf3,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-17 DQF3 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG17dqf2,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-17 DQF2 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG17dqf1,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-17 DQF1 Coverage"
)

goesaodc_plotScanRaster(
  raster = scanRasterG17dqf0,
  naColor = "transparent",
  legendLimits = c(-0.5, 5.5),
  stateCodes = datasets::state.abb,
  title = "GOES-17 DQF0 Coverage"
)
```